@model ResetPassword
@{
    ViewData["Title"] = "Réinitialisation de mot de passe";
    Layout = "~/Views/Shared/AuthentificationLayout/LayoutSignUp.cshtml";
}
<section>
    <div class="page-header align-items-start min-vh-50 pt-5 pb-11 m-3 border-radius-lg" style="background: linear-gradient(to left, #0d2d5a, #4280c7);">
        <span class="mask bg-gradient-dark opacity-6"></span>
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-5 text-center mx-auto">
                    <h1 class="text-white mb-2 mt-5">Bienvenue!</h1>
                    <h5 class="text-white mb-0 mt-0">Réinitialiser votre mot de passe</h5>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row mt-lg-n10 mt-md-n11 mt-n10">
            <div class="col-xl-4 col-lg-5 col-md-7 mx-auto">
                <div class="card z-index-0">
                    <div class="card-header text-center pt-4">
                        <h3 class="font-weight-bolder" style="color: #0d2d5a;">Réinitialiser votre mot de passe</h3>
                        <p class="mb-0">Veuillez entrer votre nouveau mot de passe et le confirmer.</p>
                    </div>
                    <div class="card-body">
                        @if (TempData["Error"] != null)
                        {
                            <div class="text-danger text-center">
                                @TempData["Error"]
                            </div>
                        }
                        @if (TempData["Message"] != null)
                        {
                            <div class="text-success text-center">
                                @TempData["Message"]
                            </div>
                        }
                    </div>
                    <div class="card-body">
                        <form asp-action="ResetPassword" method="post">
                            <input type="hidden" asp-for="Token" />
                            <input type="hidden" asp-for="Email" />
                            <div class="mb-3 position-relative">
                                <label for="NewPassword" class="form-label">Nouveau mot de passe</label>
                                <input type="password" class="form-control" asp-for="NewPassword" placeholder="Mot de passe" aria-label="Password" aria-describedby="password-addon" id="passwordInput">
                                <i class="fas fa-eye position-absolute" id="togglePassword" style="right: 15px; top: 70%; transform: translateY(-50%); cursor: pointer;"></i>
                                <span asp-validation-for="NewPassword" class="text-danger"></span>
                            </div>
                            <div class="mb-3">
                                <label for="ConfirmPassword" class="form-label">Confirmer le mot de passe</label>
                                <input type="password" class="form-control" id="ConfirmPassword" asp-for="ConfirmPassword" placeholder="Confirmer le mot de passe" required />
                                <span asp-validation-for="ConfirmPassword" class="text-danger"></span>
                            </div>
                            <div class="text-center">
                                <button type="submit" class="btn w-100 mt-4 mb-0" style="color: azure; background-color: #2c3e50;">Réinitialiser le mot de passe</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>



    <script>

        document.getElementById('togglePassword').addEventListener('click', function (e) {
        const passwordField = document.getElementById('passwordInput');
        const icon = document.getElementById('togglePassword');

            if (passwordField.type === "password") {
                passwordField.type = "text";
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                passwordField.type = "password";
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        });

        // Validation pour vérifier que les mots de passe correspondent
        document.querySelector("form").addEventListener("submit", function (e) {
            var newPassword = document.getElementById("NewPassword").value;
            var confirmPassword = document.getElementById("ConfirmPassword").value;

            if (newPassword !== confirmPassword) {
                e.preventDefault(); // Empêche l'envoi du formulaire
                alert("Les mots de passe ne correspondent pas. Veuillez réessayer.");
            }
        });
    </script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">


